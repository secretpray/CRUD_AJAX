var errorsSection = {}
errorsSection = document.querySelector('.errors-section')

if(errorsSection) { errorsSection.innerHTML = '' }

<% if @user.errors.any? %>
  errorsSection.insertAdjacentHTML('beforeend', "<%= j render 'shared/errors', user: @user %>")
<% else %>
  document.getElementById('table-body').insertAdjacentHTML('afterbegin', "<%= j render 'table_row', user: @user, index: @index %>")

  // create new pagination (TODO remake with JS)
  var pagySection = {}
  pagySection = document.querySelector('.pagination-link')
  pagySection.innerHTML = "<%== j render partial: 'pagy/bootstrap_nav', locals: {pagy: @pagy} %>"

  // close Modal
  document.querySelector('.close-create').click()
<% end %>
